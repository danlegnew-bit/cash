<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="–°–µ–º–µ–π–Ω—ã–π –ë—é–¥–∂–µ—Ç">
    <meta name="description" content="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É—á–µ—Ç–∞ –ª–∏—á–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ —Å–µ–º—å–∏">
    
    <!-- –ò–∫–æ–Ω–∫–∏ -->
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512x512.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    
    <!-- –ú–∞–Ω–∏—Ñ–µ—Å—Ç -->
    <link rel="manifest" href="manifest.json">
    
    <title>–°–µ–º–µ–π–Ω—ã–π –ë—é–¥–∂–µ—Ç</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üí∞ –°–µ–º–µ–π–Ω—ã–π –ë—é–¥–∂–µ—Ç</h1>
            <p>–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è</p>
        </header>

        <div class="nav-tabs">
            <div class="nav-tab active" onclick="switchTab('calendar')">üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å</div>
            <div class="nav-tab" onclick="switchTab('stats')">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –ö–∞–ª–µ–Ω–¥–∞—Ä—å -->
        <div id="calendar-tab" class="tab-content active">
            <div class="calendar-section">
                <div class="calendar-header">
                    <h2 id="currentMonthYear">–Ø–Ω–≤–∞—Ä—å 2024</h2>
                    <div class="calendar-nav">
                        <button onclick="previousMonth()">‚óÄ –ü—Ä–µ–¥</button>
                        <button onclick="goToToday()">–°–µ–≥–æ–¥–Ω—è</button>
                        <button onclick="nextMonth()">–°–ª–µ–¥ ‚ñ∂</button>
                    </div>
                </div>

                <div class="calendar-grid">
                    <div class="calendar-day-header">–ü–Ω</div>
                    <div class="calendar-day-header">–í—Ç</div>
                    <div class="calendar-day-header">–°—Ä</div>
                    <div class="calendar-day-header">–ß—Ç</div>
                    <div class="calendar-day-header">–ü—Ç</div>
                    <div class="calendar-day-header">–°–±</div>
                    <div class="calendar-day-header">–í—Å</div>
                </div>

                <div class="calendar-grid" id="calendarDays"></div>

                <div class="selected-date-info">
                    <h3 id="selectedDateDisplay">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</h3>
                </div>
            </div>

            <div class="day-expenses">
                <div class="day-expenses-header">
                    <h3>–†–∞—Å—Ö–æ–¥—ã –∑–∞ –¥–µ–Ω—å</h3>
                    <span class="total" id="dayTotal">0 ‚ÇΩ</span>
                </div>
                <div id="dayExpensesList">
                    <div class="empty-state">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ</div>
                </div>
            </div>

            <button class="fab-button pulse" onclick="openModal()">+</button>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div id="stats-tab" class="tab-content">
            <div class="stats-section">
                <div class="calendar-header">
                    <h2 id="statsMonthYear">–Ø–Ω–≤–∞—Ä—å 2024</h2>
                    <div class="calendar-nav">
                        <button onclick="previousStatsMonth()">‚óÄ –ü—Ä–µ–¥</button>
                        <button onclick="goToCurrentMonth()">–¢–µ–∫—É—â–∏–π</button>
                        <button onclick="nextStatsMonth()">–°–ª–µ–¥ ‚ñ∂</button>
                    </div>
                </div>

                <div class="month-summary">
                    <div class="summary-card fixed">
                        <h3>–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ</h3>
                        <div class="amount" id="statsFixed">0 ‚ÇΩ</div>
                        <p>–∑–∞ –º–µ—Å—è—Ü</p>
                    </div>
                    <div class="summary-card variable">
                        <h3>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ</h3>
                        <div class="amount" id="statsVariable">0 ‚ÇΩ</div>
                        <p>–∑–∞ –º–µ—Å—è—Ü</p>
                    </div>
                    <div class="summary-card other">
                        <h3>–ü—Ä–æ—á–∏–µ</h3>
                        <div class="amount" id="statsOther">0 ‚ÇΩ</div>
                        <p>–∑–∞ –º–µ—Å—è—Ü</p>
                    </div>
                    <div class="summary-card total">
                        <h3>–í—Å–µ–≥–æ</h3>
                        <div class="amount" id="statsTotal">0 ‚ÇΩ</div>
                        <p>–∑–∞ –º–µ—Å—è—Ü</p>
                    </div>
                </div>

                <div class="chart-container">
                    <h3>üìä –ì—Ä–∞—Ñ–∏–∫ —Ä–∞—Å—Ö–æ–¥–æ–≤</h3>
                    <div class="bar-chart">
                        <div class="bar-wrapper">
                            <div class="bar" id="barFixed" style="height: 0px; background: linear-gradient(to top, #e74c3c, #c0392b);">
                                <div class="bar-value">0 ‚ÇΩ</div>
                            </div>
                            <div class="bar-label">–ü–æ—Å—Ç.</div>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar" id="barVariable" style="height: 0px; background: linear-gradient(to top, #f39c12, #f1c40f);">
                                <div class="bar-value">0 ‚ÇΩ</div>
                            </div>
                            <div class="bar-label">–ü–µ—Ä–µ–º.</div>
                        </div>
                        <div class="bar-wrapper">
                            <div class="bar" id="barOther" style="height: 0px; background: linear-gradient(to top, #3498db, #5dade2);">
                                <div class="bar-value">0 ‚ÇΩ</div>
                            </div>
                            <div class="bar-label">–ü—Ä–æ—á.</div>
                        </div>
                    </div>
                </div>

                <div class="daily-stats">
                    <h3>üìã –ü–æ –¥–Ω—è–º –º–µ—Å—è—Ü–∞</h3>
                    <table class="stats-table">
                        <thead>
                            <tr>
                                <th>–î–∞—Ç–∞</th>
                                <th>–ü–æ—Å—Ç.</th>
                                <th>–ü–µ—Ä–µ–º.</th>
                                <th>–ü—Ä–æ—á.</th>
                                <th>–ò—Ç–æ–≥–æ</th>
                            </tr>
                        </thead>
                        <tbody id="dailyStatsBody">
                            <tr><td colspan="5" class="empty-state">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
    <div class="modal" id="expenseModal" onclick="closeModalOnOverlay(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h3>‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥</h3>
                <button class="close-modal" onclick="closeModal()">‚úï</button>
            </div>

            <form onsubmit="addExpense(event)">
                <div class="form-group">
                    <label>–¢–∏–ø —Ä–∞—Å—Ö–æ–¥–∞</label>
                    <select id="expenseType" required>
                        <option value="fixed">üè† –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</option>
                        <option value="variable">üõí –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</option>
                        <option value="other">üé≠ –ü—Ä–æ—á–∏–µ —Ä–∞—Å—Ö–æ–¥—ã</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select id="expenseCategory" required>
                        <option value="–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏">–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏</option>
                        <option value="–ù–∞–ª–æ–≥–∏">–ù–∞–ª–æ–≥–∏</option>
                        <option value="–ê—Ä–µ–Ω–¥–∞">–ê—Ä–µ–Ω–¥–∞</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–∞</label>
                    <input type="text" id="expenseName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ" required>
                </div>

                <div class="form-group">
                    <label>–°—É–º–º–∞ (‚ÇΩ)</label>
                    <input type="number" id="expenseAmount" placeholder="0" min="1" required>
                </div>

                <button type="submit" class="btn btn-add">–î–æ–±–∞–≤–∏—Ç—å</button>
                <button type="button" class="btn btn-cancel" onclick="closeModal()">–û—Ç–º–µ–Ω–∞</button>
            </form>
        </div>
    </div>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å—Ç–∞–Ω–æ–≤–∫–µ -->
    <div id="installPrompt" class="install-prompt" style="display: none;">
        <div class="install-prompt-content">
            <h3>üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ?</h3>
            <p>–î–æ–±–∞–≤—å—Ç–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞</p>
            <div class="install-buttons">
                <button class="btn btn-add" onclick="installApp()">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                <button class="btn btn-cancel" onclick="dismissInstall()">–ü–æ–∑–∂–µ</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/install.js"></script>
</body>
</html>
